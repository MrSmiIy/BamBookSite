<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="{% static 'home/bambook.png' %}" rel="icon">
    <link href="{% static 'home/index.css' %}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>БамBook</title>
</head>
<script>
    function checkPassword(form) {
        const confirm_password = document.getElementById("cpwd");
        var password = document.getElementById("pwd").value;
        console.log(password)
        if (password != confirm_password.value) {
            confirm_password.setCustomValidity("Пароль не совпадает");
        } else {
            confirm_password.setCustomValidity("");
        }
    }
</script>
<body>
    <div id="header">
        <div id="green_line">
            <div>
                <img src="{% static 'home/Logo.png' %}" width="10%" style="margin-left:5%;display:block;">
            </div> 
        </div>
        <div id="poisk-vhod">
            <div style="width:100%;">
                <img src="{% static 'home/book.png' %}" alt="" width="5%" style="margin-left:3vw;margin-top:5px;" class="poisk">
                <form action="" method="get" class="poisk">
                    <input name="s" placeholder="Книги, авторы, жанры..." type="text" style="font-size:1.4vw;">
                    <button type="submit" id="search"></button>
                </form>
                <a id="login" class="poisk button open-button" onclick="openForm()" href="#"><img src="{% static 'home/Login.png' %}" class="but_img">Войти</a> 
                <a id="library" class="poisk button" href='my_books'><img src="{% static 'home/Library.png' %}" class="but_img">Мои книги</a>
                
                <div class="form-popup" id="myForm">
                    <form method='POST' enctype="multipart/form-data" class="form-container">
                        {% csrf_token %}
                        <label for="login-username"><b>Email или имя пользователя</b></label>
                        <input type="text" pattern="[A-Za-z0-9.@_-e]+" name="username" placeholder="Email или имя пользователя" required>
                
                        <label for="login-username"><b>Пароль</b></label>
                        <input type="password" name="password" placeholder="Пароль" required>
                        <span>
                            <button type="submit" class="btn">Вход</button>
                            <a class='btn' style="color:black;" onclick="openForm1()">Нет учётной записи? Регистрация</a>
                        </span> 
                    </form>
                </div>
                <div class="form-popup" id="myForm1">
                    <form action={% url "signup"%} method='POST' enctype="multipart/form-data" class="form-container">
                        {% csrf_token %}
                        <label for="login-username"><b>Имя пользователь</b>
                        </label>
                        <input type="text" pattern="[A-Za-z0-9.@_-e]+" name="username" placeholder="Имя пользователя" required>
                        
                        <label for="login-username"><b>Email</b>
                        </label>
                        <input type="text" pattern="[A-Za-z0-9.@_-e]+" name="email" placeholder="Email" required>

                        <label for="login-username"><b>Пароль</b></label>
                        <input type="password" id="pwd" name="password" placeholder="Пароль" required>
                        <label for="login-username"><b>Повторите пароль</b></label>
                        <input type="password" id="cpwd" name="password" placeholder="Повторите пароль" required>
                        </span> 
                        <button type="submit" class="btn">Регистрация</button>
                    </form>
                </div>
            </div>
        </div>
        <nav id="gray_line">
            <nav style="margin-left:4%;height:2.6vw;">
                <a href="#" class="genres">Жанры</a>
                <a href="#" class="genres">Популярное</a>
                <a href="#" class="genres">Новинки</a>
            </nav>
        </nav>
    </div>  
    <div id="books">
        <div style="height:13vw;display:block;"></div>
        <div id="line_book">
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
            <a href="#" class="book">
                <img src="{% static 'home/book_logo.png'%}" width="100%">
                <span class="book_name">Cat</span>
            </a>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>   
    <script>
        function openForm() {
            document.getElementById("myForm").style.display = "block";
        }
        
        function openForm1() {
            document.getElementById("myForm").style.display = "none";
            document.getElementById("myForm1").style.display = "block";  
        }
        
        const div = document.querySelector('.form-popup');
        const dive = document.querySelector('.open-button');
        document.addEventListener( 'click', (e) => {
            const withinBoundaries = e.composedPath().includes(dive);
            const withinBoundary = e.composedPath().includes(div);
         
            if ((!withinBoundary) && (!withinBoundaries))  {
                document.getElementById("myForm").style.display = "none";
            }

            if ((!withinBoundary) && (withinBoundaries))  {
                document.getElementById("myForm1").style.display = "none";
            }
        }) 
        </script>
</body>
</html>